# 体系结构设计文档

- 黄振川：1、2、3、4、5.3
- 刘明康：5.1、5.2、5.5、5.6、6.3
- 王硕：5.4、5.5、5.6、6.1、6.2
- 殷嘉鸿：5.5、5.6、5.7、5.8、6.3
- 张谱原：5.5、5.6、6.1、6.2、6.3

# 1 范围

本文档参照 IEEE-42010 第一版（20111201）写成（以下简称“该国际标准”或“本国际标准”），该国际标准指明系统的架构说明的组织和表达的方式，以及·要在架构说明中使用的架构视图、架构框架和架构描述语言。该国际标准也提供了所使用的术语和概念的触发及来源，在特定的架构视点上的表达的指导，还有展示该国际标准与其他标准一起使用的用法。

# 2 符合度

该国际标准的需求包含在条款 5、6 和 7。在声明与该国际标准条款的符合度时，包括 4 种情况：
- 当声明有关架构说明的符合度时，声明需要展示架构说明满足条款 5 所列的需求。
- 当声明有关架构视点的符合度时，声明需要展示架构视点说明满足条款 7 所列的需求。
- 当声明有关架构框架的符合度时，声明需要展示架构视点说明满足条款 6.1 所列的需求。
- 当声明有关架构视点语言的符合度时，声明需要展示架构视点说明满足条款 6.3 所列的需求。

# 3 术语和定义

为了达成本文档的目标，本文档中使用了以下的术语和定义。

## 3.1 架构开发（architecting）

贯穿于系统整个生命周期的，对架构进行构思、定义、表达、编档、保证正确的实现、维护和改进的过程。

## 3.2 架构（architecture）

一个系统在其所处环境中的（系统的）基础概念或属性，其内容包括它的元素、关系和它的设计和演进的原则。

## 3.3 架构说明（architecture description，AD）

用于表达一个架构的工作作品。

## 3.4 架构框架（architecture framework）

在一个特定的应用领域和/或干系人团体中建立的、有关架构描述方面的协议、原则和实践。

## 3.5 架构视图（architecture view）

从特定的系统关注点的视角来表达系统架构的工作作品。

## 3.6 架构视点（architecture viewpoint）

为了构造特定的系统关注点而建立的有关视图的构造、解释和使用方面的协约的工作作品。

## 3.7 关注点（concern）

在一个系统中，与一个或多个干系人相关的（系统）利益。

## 3.8 环境（environment）

（系统的）上下文，它决定所有施加于系统的配置(setting)和境况(circumstances)。

## 3.9 模型种类（model kind）

针对一种建模类型的协约。

## 3.10 干系人（stakeholder）

在系统中具有利益的（系统的）个体、团队、组织或它们的类别。

# 4 概念基础

## 4.1 介绍

本条款介绍了架构说明的概念基础，包括架构说明的概念模型（见 4.2）；架构在生命周期中的角色（见 4.3）；架构说明的使用（见 4.4）；架构框架和架构说明语言（见 4.5）。本条款介绍的概念在第 5 章至第 7 章中用于表达相关的需求。

## 4.2 架构说明的概念模型

### 4.2.1 架构说明的上下文

该国际标准中使用的术语系统(system)是指某个实体，架构是它的利益。该术语旨在包含但不限于、以下领域中的实体：
- 在[ISO/IEC 15288]中，系统(systems)描述为：“系统是人工制造的，可由在此列出的一个或多个事物构成：硬件、软件、数据、人、过程（例如为用户提供服务的过程）、规程（例如操作指令）、设施、材料和自然发生的实体”；
- 在[ISO/IEC 12207]中描述为软件产品和服务(software products and services)；
- 在[IEEE Std 1471: 2000]中描述为软件密集型系统(software-intensive systems)： “软件对整个系统的设计、构建、开发和演进起着基础性影响的任何系统”，涵盖了“单个应用程序，传统意义上的系统，子系统和系统的系统，产品线，产品族，整个企业和其他利益的集合”。

### 4.2.2 架构和架构说明

架构说明是构造系统和软件架构时输出的工作产品。

在该国际标准中，术语利益系统（system-of-interest，或简称系统）是在系统架构准备活动中，正在考虑其架构的系统。

### 4.2.3 干系人与关注点

系统的干系人关注于与其环境相关的利益系统。一个关注点可以有一个或多个干系人关注。

从系统需要和需求、设计选择以及实现和操作考虑，整个生命周期都会引发关注点。

关注点可以以多种形式表现出来，诸如与一个或多个干系人需求、目标、期望、责任、要求、设计约束、假设、依赖关系、质量属性、架构决策、风险或与系统相关的其他问题。

### 4.2.4 架构视图和视点

架构说明包括一个或多个架构视图。架构视图（或简称视图 view）致力于系统干系人所持的一个或多个关注点。

架构视图根据架构视点（或简称为视点 viewpoint）表述利益系统的架构。与视点有两个相关方面：它为干系人构成的关注点以及建立视图的约定。

架构视点构成(frame)一个或多个关注点。一个关注点可以由多个视点构成。

一个视图受其视点管控(governed)：视点确立了构建、解释和分析视点的约定，以关注于该视点所形成的关注点。视点协议可以包括语言、符号系统、模型种类、设计规则和/或建模方法、分析技术和视图上的其他操作。

### 4.2.5 架构模型

架构视图由一个或多个架构模型组成。架构模型采用适合要解决的问题的建模约定。这些约定由管理该模型的模型种类(model kind)指定。在架构说明中，一个架构模型可以是多个架构视图的一部分。

### 4.2.6 AD 元素和对应关系

AD 元素是架构说明中的任一构件。AD 元素是本国际标准中讨论的最原始的构件。每个干系人、关注点、架构视点、架构视图、模型类别、架构模型，架构决策和基本原理（见 4.2.7）都可被视为 AD 元素。在定义视点和模型类型时，以及用它们来组装模型时，会引入更多的 AD 元素。

对应关系(correspondence)定义了AD 元素之间的关系。对应关系用于表示架构说明（或架构说明之间）中的利益方面的架构关系。对应关系可以通过对应关系规则 (correspondence rules)来管控。对应关系规则用于在架构说明（或架构说明之间）实施关系。

### 4.2.7 架构决策和基本原理

架构基本原理记录了对已做出的架构决策的解释、理由或推理。决策的基本原理可包括决策的依据、已考虑的备选方案和权衡、决策的潜在后果，以及对附加信息来源的引用。

决策与系统关注点相关；但是两者之间通常没有简单的映射。一项决策可以通过多种方式影响架构。在架构说明中可以呈现如下：
- 要求存在AD 元素；
- 改变AD 元素的属性；
- 触发权衡分析，在其中修订了一些AD 要素，包括其他决定和关注点；
- 提出新的关注点。

## 4.3 生命周期中的架构构建

架构构建(Architecting)贡献于系统的开发、操作和维护，从最初概念到退出使用及处置。架构构建发生在项目和/或组织的环境中。架构构建在整个系统生命周期中执行，而不仅仅是在生命周期的一个阶段内。因此，系统的架构潜在影响整个系统生命周期中的过程。

架构说明是在利益系统的生命周期内执行架构活动而产生的工作产品。生命周期规定了生成符合标准的架构说明内容的阶段和方式。即使架构说明是由单个生命周期活动产生的，其内
容也可能是多个活动的结果。或者，可以通过聚合来自生命周期活动开发的其他工作产品的信息来产生架构说明。

该国际标准不依赖、假设或规定任何特定的生命周期。

## 4.4 架构说明的使用

在整个系统生命周期中，架构说明可供各种干系人使用。架构说明的用途包括但不限于：
- 作为系统设计和开发活动的依据；
- 作为分析和评估架构的备选实现方案的依据；
- 作为开发和维护文档；
- 记录系统的基础方面，例如：
  - 预期用途和环境；
  - 指导未来变化的原则，假设和约束；
  - 系统在未来变化方面的灵活性或局限性；
  - 架构决策、基本原理和暗示；
- 作为用于仿真、系统生成和分析的自动化工具的输入；
- 指明具有一组共同特征的系统（例如架构风格，参考架构和产品线架构）；
- 用与系统开发、生产、部署、运行和维护的各方之间的沟通；
- 作为验收准备文件的依据（如征求建议书和工作说明书）；
- 作为合同谈判的一部分，与客户、需求方、供给方和开发方之间进行沟通；
- 为潜在客户、需求方、拥有者、操作者和集成者编档系统的特征、特性和设计；
- 从遗留架构过渡到新架构的规划；
- 作为运营和基础设施支持和配置管理的指南;
- 支持系统规划，进度和预算编制活动;
- 建立标准，用于保证实现方式遵从了架构；
- 作为外部和项目和/或组织内部政策的合规机制（例如，立法，构建架构原则）；
作为系统在整个生命周期内进行审查，分析和评估的依据；
- 作为分析和评估备选架构的依据；
- 通过视点、模式和风格分享经验教训并复用架构知识；
- 对干系人和其他各方，在架构构建和系统演进的最佳实践的方面进行培训和教育。

## 4.5 架构框架和架构说明语言

架构框架和架构说明语言（ADL）是架构构建中得到广泛使用的两种机制。架构框架和架构说明语言是在本国际标准中建立的架构说明的概念基础上来指明的。

架构框架建立了在特定应用程序领域或干系人团体中创建、解释、分析和使用架构说明的通用实践。

架构框架的使用包括但不限于：创建架构说明；开发架构建模工具和架构方法；还有建立过程以促进跨多个项目和/或组织的沟通、承诺和协作。

架构说明语言（ADL）是用于架构说明的任何形式的表达。

ADL 提供一个或多个模型种类，作为构造干系人受众关注点的方法。ADL 可以是较窄地聚焦，定义单一的模型种类，或者在较广范围内提供几种模型种类，选择性地组织为视点。通常，ADL 由自动化工具提供支持，以帮助其创建、使用和分析模型。

# 5 架构说明

## 5.1 介绍

本条款指明描述架构说明的特性，以使 4.4 中描述的要点能够得到应用。架构说明包含以下内容，将在本条款的其余部分进行说明。
- 架构说明的标识和概述信息（见 5.2）；
- 系统干系人及其关注点的标识（见 5.3）；
- 在架构说明中使用的每个架构视点的定义（见 5.4）；
- 应用每个架构视点得到的对应的架构视图和架构模型（见 5.5 和 5.6）；
- 可用的 AD 对应关系规则、AD 对应关系以及对已知的、与架构说明所需内容不一致的记录（见 5.7）；
- 架构决策所依据的基本原理（见 5.8）。

## 5.2 架构说明的标识和概述

一个架构说明应标识利益系统，以及包括项目和/或组织决定的附加信息。细节内容的标识和附加信息条目应由项目和/或组织指明。

- 利益系统标识： 
    - 系统正式名称：商品网上交易系统 
    - 项目代号：ECP-2025 (E-Commerce Platform) 
    - 系统标识号：SYS-ECP-2025-B2C-V1.0 
- 附加信息： 
    - 文档编号：SRS-ECP-2025-001 
    - 项目启动日期：2025 年 2 月 28 日 
    - 版本信息：
        - 系统版本：1.0.0, 发布日期：2025-03-20, 发布状态：初始版本 
        - 文档版本：v1.0, 发布日期：2025-04-25, 发布状态：基线版本 
    - 发行号：Release 1.0 (Build 20250320.001) 
    - 主要技术栈：
        - 后端框架：Spring Framework 5.3.20 + Spring MVC 5.3.20 + MyBatis 3.5.9 
        - 前端框架：HTML5 + CSS3 + Javascript ES6 
        - 数据库：MySQL 5.7 
        - 服务器：Apache Tomcat 9.0.56 
        - 运行环境：JDK 1.8 
        - 开发工具：IDEA 2024.3.3、Maven 3.9.9 
- 系统概述：本系统旨在开发一个基于 B2C 模式的商品网上交易平台 。目的是为了解决传统中小企业缺乏自建电商能力，并满足消费者日益增长的线上购物需求，帮助企业进行数字化转型，减少对第三方电商平台的依赖 。系统基于成熟稳定的 SSM（Spring + SpringMVC + MyBatis）框架开发 。项目开发前期的主要任务是确定本项目的最终目标、所要实现的功能以及面向的用户群体等 。中期的主要任务是对前期所确定的具体功能进行基本开发，并在过程中根据需求动态调整开发策略 。后期的主要任务是对中期的开发进行完善与总结 。

## 5.3 干系人和关注点的标识

一个架构说明应识别与利益系统架构的基础性关注点相关的系统干系人。在架构说明中，应考虑并在适用时识别以下干系人：
- 系统的用户：普通用户（买家） 
- 系统的操作员：管理员（卖家） 
- 系统的接收者：传统中小企业 
- 系统的拥有者：传统中小企业 
- 系统的供应方：本文档编写团队/开发团队 
- 系统的开发者：本文档编写团队/开发团队 
- 系统的构建者：本文档编写团队/开发团队
- 系统的维护者：本文档编写团队/开发团队 

架构说明应识别利益系统架构的基础性关注点。

架构说明应考虑并在适用时识别以下关注点：
- 系统的目标：帮助缺乏自建电商能力的传统中小企业进行数字化转型，减少对第三方平台的依赖，实现基于 B2C 模式的商品网上交易。
- 架构在达成系统目标上的适合性：采用成熟稳定的 SSM 框架，适合快速构建 Java Web 项目，以支持 B2C 模式的核心功能。
- 构建和部署系统的可行性：技术团队具备开发能力，但需注意 SSM 框架在高并发场景下的局限性及团队规模较小可能带来的进度风险。
- 系统在其生命周期中对其干系人的潜在风险和影响：
    - 技术局限性：SSM 框架在高并发场景性能可能不如微服务架构。
    - 资源局限性：开发团队规模较小可能影响开发进度和功能完善度；服务器资源有限可能导致高并发瓶颈。
    - 尚未解决的问题：高并发性能优化、支付与物流接口的具体集成方案。
- 系统的可维护性和演进性：
    - 可维护性：系统设计应采用模块化和解耦架构，代码符合规范并有注释文档。
    - 灵活性/可扩展性：系统设计应具有足够的灵活性以适应未来需求变化，支持模块扩展。
    - 具体功能实现可能依据实时需求动态调整。

一个架构说明应将每个识别的关注点和识别的包含该关注点的干系人关联起来。

- 普通用户（买家）： 
    - 关注点：系统易用性，核心购物功能（浏览、搜索、购物车、下单、支付、订单跟踪），商品信息准确性。
- 管理员（卖家）/传统中小企业（拥有者/接收者）： 
    - 关注点：商品管理便捷性，订单处理效率，用户管理，获取用户行为分析数据，系统可靠性与稳定性，减少对第三方平台依赖，成本效益，数字化转型。
- 开发团队（供应方/开发者/构建者/维护者）： 
    - 关注点：技术可行性，按时完成项目，系统可维护性，满足需求规格，技术栈的稳定与成熟度，遵循开发规范与法律法规。

## 5.4 架构视点

1. 用户交互视点：关注用户（买家和卖家/管理员）与系统之间的交互流程，包括注册、登录、商品浏览、搜索、购物车操作、下单、以及管理员的商品管理和订单管理等。
2. 数据处理视点：关注系统内部数据的流动和处理过程，包括用户数据、商品数据、订单数据的创建、读取、更新和删除。
3. 系统状态视点：关注系统在不同操作下的状态转换，例如用户登录状态、订单状态等。

每个被包含的架构视点应按照条款 7 的要求进行描述：
- 用户交互视点： 
    - 关注点：用户功能实现、操作流程的顺畅性、用户体验。
    - 干系人：普通用户（买家）、管理员（卖家）、开发团队。
    - 模型种类：流程图、用例图（或功能分解图）、界面原型（若有）。
- 数据处理视点： 
    - 关注点：数据的完整性、一致性、数据流转的正确性。
    - 干系人：开发团队、管理员（卖家）。
    - 模型种类：数据流图、实体关系图（数据库ER图）、Petri网。
- 系统状态视点： 
    - 关注点：系统在关键业务流程中的状态变化及条件的正确性。
    - 干系人：开发团队、测试人员。
    - 模型种类：状态转换图。

每个根据 5.3 识别的关注点应至少有一个视点来进行刻画：
- 用户功能和易用性关注点由“用户交互视点”刻画。
- 数据管理和系统内部逻辑关注点由“数据处理视点”刻画。
- 系统行为和流程正确性关注点由“系统状态视点”和“数据处理视点”共同刻画。
- 可行性、可维护性、风险等关注点通过整体架构决策和技术选型在各视点中体现。

## 5.5 架构视图

- 用户交互视图（对应用户交互视点）
    - 管控视点标识：用户交互视点
    - 架构模型：
      - 用户登录/注册模块流程图
![用户登录及注册模块](.\images\用户登录及注册模块.png)
      - 用户购物模块流程图
![用户购物模块](.\images\用户购物模块.png)
      - 用户搜索模块流程图
![用户搜索模块](.\images\用户搜索模块.png)
      - 平台发货模块流程图
![平台发货模块](.\images\平台发货模块.png)
      - 商品管理流程图
![商品管理模块](.\images\商品管理模块.png)
    - 关注点描述：此视图展示了用户（买家和管理员）如何与系统的各项主要功能进行交互，覆盖了注册、登录、商品浏览、搜索、购物车管理、下单、支付以及管理员的商品和订单管理流程。
    - 已知问题：暂无。
- 数据处理视图（对应数据处理视点）
    - 管控视点标识：数据处理视点。
    - 架构模型： 
        - 系统处理流程与数据流程图
![处理流程与数据流程](.\images\处理流程与数据流程.png)
        - Petri 网（表示核心交易流程的数据和控制流）
![Petri网](.\images\Petri网.png)
        - 接口标识和接口图
![接口标识和接口图](.\images\接口标识和接口图.png)
    - 关注点描述：此视图展示了系统核心业务数据（用户、商品、订单等）在不同模块间的流动、处理和存储机制。
    - 已知问题：暂无。
- 系统状态视图（对应系统状态视点）
    - 管控视点标识：系统状态视点。
    - 架构模型： 
        - CSCI 状态定义和运行方式描述 
        - 登录状态图 
![登录状态图](.\images\登录状态图.png)
    - 关注点描述：此视图描述了系统在用户操作或内部事件驱动下的主要状态转换，如用户会话状态、订单生命周期状态等。
    - 已知问题：暂无。

## 5.6 架构模型

一个架构视图应由一个或多个架构模型组成。每个架构模型应包括由组织和/或项目指定的版本标识。每个架构模型应识别其管理模型种类并遵从该模型种类的协议（见 5.4）。一个架构模型可能是超过一个架构视图的组成部分。

架构说明中使用的主要架构模型包括：
- 数据流图（Data Flow Diagrams）
    - 来源：README 5.2, SRS 3.2.1 (处理流程与数据流程图) 
    - 模型种类：数据流图
    - 描述：用于可视化数据在系统不同处理单元之间的流动。
    - 包含的视图：用户交互视图, 数据处理视图
    - 图例： 
![用户登录及注册模块](.\images\用户登录及注册模块.png) 
![用户购物模块](.\images\用户购物模块.png) 
![用户搜索模块](.\images\用户搜索模块.png) 
![平台发货模块](.\images\平台发货模块.png) 
![处理流程与数据流程](.\images\处理流程与数据流程.png) 
- 功能分解图/用例图（Simplified Functional Decomposition/Use Case Diagrams）
    - 来源：SRS 3.3.2 (软件子系统功能/对象结构) 
    - 模型种类：功能分解图 (或视为简化的用例图)
    - 描述：展示系统的主要功能模块及其子功能，反映了用户与系统功能的交互。
    - 包含的视图：用户交互视图
    - 图例： 
![用户登录及注册模块](.\images\用户登录及注册模块.png) 
![商品管理模块](.\images\商品管理模块.png) 
![用户购物模块](.\images\用户购物模块.png) 
![用户搜索模块](.\images\用户搜索模块.png)
![平台发货模块](.\images\平台发货模块.png) 
- 状态转换图（State Transition Diagrams）
    - 来源：SRS 3.1 
    - 模型种类：状态转换图
    - 描述：表示系统或其组件在不同事件触发下的状态变化。
    - 包含的视图：系统状态视图
    - 图例： 
![登录状态图](.\images\登录状态图.png) 
- Petri 网（Petri Nets）
    - 来源：SRS 3.2.1 
    - 模型种类：Petri 网
    - 描述：用于对系统动态行为建模，特别是并发和同步方面。
    - 包含的视图：数据处理视图
    - 图例： 
![Petri网](.\images\Petri网.png) 
- 接口图（Interface Diagrams）
    - 来源：SRS 3.5.1 
    - 模型种类：接口图
    - 描述：展示系统与外部实体或系统内部组件之间的接口。
    - 包含的视图：数据处理视图
    - 图例： 
![接口标识和接口图](.\images\接口标识和接口图.png)

## 5.7 架构关联

### 5.7.1 架构说明内的一致性

架构说明应记录所有已知的架构模型和视图中的不一致：
- 在当前阶段，未识别出架构模型和视图之间的明显不一致。各视图和模型均源自统一的需求规格 (SRS) 和系统概述 (FAR)，旨在从不同角度描述同一系统。

架构说明应包含其架构模型和视图的一致性分析：
- 各架构视图（用户交互视图、数据处理视图、系统状态视图）通过共享和引用共同的系统功能模块和数据实体来保持一致性。例如，用户购物流程（用户交互视图）中涉及的订单数据处理（数据处理视图）和订单状态变更（系统状态视图）是相互关联和一致的。功能分解图和数据流图共同描述了系统的结构和行为，确保了覆盖的完整性。

5.7.2 和 5.7.3 中描述的对应关系和对应关系规则，可能用于表达、记录、强化和分析架构说明内模型、视图和其他 AD 元素之间的一致性。

### 5.7.2 对应关系

架构说明中的每个对应关系都应被识别，同时识别它们参与的 AD 元素。

- 由于本架构说明主要基于功能分解和高层数据流，详细的 AD 元素间对应关系（如细化到模型内部元素）未在本阶段明确形式化记录。对应关系主要体现在：
- 功能与数据流的对应：SRS 3.3.2 中的功能模块与 FAR 5.2 及 SRS 3.2.1 中的数据流图所示的数据处理流程相对应。例如，“用户购物模块”功能对应于购物车数据更新、订单生成等数据流。
- 状态与操作的对应：SRS 3.1 中的系统状态（如“活动”状态）与用户执行的具体操作（如购物车编辑、支付）相对应。

AD 元素可能是 4.2 中介绍的任何构件的实例（干系人、系统关注点、架构视点、架构视图,模型种类、架构模型、架构决策和基本原理）。在定义视点和模型类型时，可能会引入其他的附加类别的 AD 元素。

架构说明中的每个对应关系应识别所有对它进行管控的对应关系规则（见 5.7.3）。

### 5.7.3 对应关系规则

一个架构说明应包含它所使用的每个对应关系规则。

- 本阶段未定义形式化的对应关系规则。

对每个已识别的对应关系规则，架构说明应记录是否遵守了规则，或记录所有已知的违例情况。

- 不适用，因未定义形式化规则。

当一个对应关系能够显示出它满足了对应关系规则，则是遵守(hold)了对应关系规则。如果一个对应关系显示出它不满足对应关系规则，或者没有对应关系规则存在，则是规则被违反(violated)。

## 5.8 架构基本原理

### 5.8.1 基本原理的记录

架构说明应当包括使用 5.4 而包含的每个架构视点的基本原理，基本原理使用干系人、关注点、模型类型、符号系统和方法等方面的信息来说明。

架构说明应包含每个关键架构决策的原理陈述(通过 5.8.2)。

架构说明应提供证据说明如何考虑其他替代方案和以及做出选择的原理陈述。

- 用户交互视点原理：选择此视点是为了清晰地向用户（买家、卖家）和开发团队展示系统的核心功能及其操作流程，确保系统满足用户的功能性需求和易用性关注点。采用流程图和功能分解图能直观表达交互逻辑。
- 数据处理视点原理：选择此视点是为了向开发团队和系统管理员揭示系统内部数据的处理方式和流动路径，关注数据的正确性、一致性和完整性。采用数据流图、Petri网和接口图有助于理解复杂的数据交互。
- 系统状态视点原理：选择此视点是为了描述系统在关键业务流程中的动态行为和状态转换，确保开发团队和测试人员对系统行为有准确理解，关注系统的健壮性和可预测性。采用状态转换图能清晰表达这些动态。

### 5.8.2 决策的记录

架构说明应当记录被认为对利益系统架构关键的架构决策。

以下是本系统的一些关键架构决策及其原理：

决策：采用 B2C（企业对消费者）模式，初期支持单一卖家。 
- 陈述：系统将实现 B2C 电子商务模式，初期设计为支持单个商家（卖家）面向多个消费者（买家）进行商品交易。
- 系统关注点：满足传统中小企业自建电商平台、减少对第三方依赖的需求；简化初期系统复杂度和管理运营。
- 拥有者：项目决策层/开发团队。
- 影响的 AD 元素：整体系统架构、用户角色定义、商品管理模块、订单处理流程。
- 原理陈述：考虑到项目目标是帮助缺乏自建电商能力的传统中小企业进行数字化转型，并减少对第三方平台的依赖，B2C 模式能直接满足此需求。初期限定为单一卖家是为了降低项目初期的开发复杂度和风险，便于快速上线和验证核心功能。
- 约束和假设：假设初期业务规模可由单一卖家模式承载。
- 考虑的备选方案： 
- C2C 平台：不符合项目帮助企业转型的初衷。
- 多租户 B2C 平台（一开始就支持多卖家）：增加了初期开发复杂度和运营难度。
- 选择原理：单一卖家 B2C 模式最能直接且快速地满足核心目标用户（中小企业）的需求，同时控制了项目初期的复杂度。

决策：后端采用 SSM（Spring + SpringMVC + MyBatis）框架。 
- 陈述：系统后端将使用 Spring Framework、Spring MVC 和 MyBatis 框架进行开发。
- 系统关注点：开发效率、技术成熟度、稳定性、团队熟悉度、快速构建能力。
- 拥有者：开发团队。
- 影响的 AD 元素：软件架构、开发流程、技术选型、CSCI 内部接口。
- 原理陈述：SSM 框架成熟稳定，适合快速构建 Java Web 项目。这对于资源相对有限、追求快速上线的项目而言是合适的选择。团队对这些技术有一定学习和使用经验。
- 约束和假设：假设 SSM 框架能满足系统初期的性能需求。开发团队具备使用 SSM 框架的能力。
- 考虑的备选方案： 
- 微服务架构（如 Spring Boot/Cloud）：对于初期项目规模和团队大小而言可能过于复杂，开发周期长。
- 其他 Java EE框架（如 Servlet/JSP 直接开发）：开发效率较低，维护性差。
- 非 Java 技术栈：可能与团队现有技能不符。
- 选择原理：SSM 框架在成熟度、开发效率和团队熟悉度之间取得了较好的平衡，符合项目快速构建和稳定性的要求。
- 做出决策时间点：项目技术选型阶段。

决策：前端采用 HTML5 + CSS3 + Javascript ES6。 
- 陈述：系统前端将使用 HTML5、CSS3 和 Javascript ES6 进行开发。
- 系统关注点：用户界面实现、跨浏览器兼容性、前端开发效率、现代 Web 标准。
- 拥有者：开发团队。
- 影响的 AD 元素：用户界面、用户交互视图。
- 原理陈述：这些是现代 Web 开发的标准技术，具有良好的生态系统、广泛的浏览器支持和丰富的开发资源，能够满足构建响应式和交互式用户界面的需求。
- 约束和假设：假设标准 Web 技术能满足用户体验需求。
- 考虑的备选方案： 
- 特定的前端框架（如 Vue.js、React、Angular）：虽然 SRS 3.14 提及“结合 Vue.js 或 React 框架”，但核心技术栈定义为基础 HTML/CSS/JS。若采用这些框架，会增加学习曲线和项目复杂度，但也能提高开发效率和组件化程度。此决策点可能需进一步明确。
- 选择原理：基础 Web 技术具有普适性和较低的入门门槛，能够满足项目需求。
- 做出决策时间点：项目技术选型阶段。

决策：数据库使用 MySQL 5.7。 
- 陈述：系统将使用 MySQL 5.7 作为关系型数据库管理系统。
- 系统关注点：数据持久化、数据一致性、成本（MySQL 开源）、成熟度、社区支持。
- 拥有者：开发团队。
- 影响的 AD 元素：数据存储、数据处理视图、CSCI 内部数据需求。
- 原理陈述：MySQL 是一款成熟、稳定且广泛使用的开源关系型数据库，社区支持良好，能够满足中小型电商平台的数据存储需求。
- 约束和假设：假设 MySQL 5.7 的性能和特性满足系统需求。
- 考虑的备选方案： 
- 其他关系型数据库（如 PostgreSQL、Oracle）：PostgreSQL 功能更强但可能团队熟悉度较低；Oracle 成本较高。
- NoSQL 数据库（如 MongoDB）：对于核心交易数据，关系型数据库提供的事务支持和一致性更佳。
- 选择原理：MySQL 在成本、成熟度和社区支持方面具有优势，且适合关系型数据模型。
- 做出决策时间点：项目技术选型阶段。

决策：运行环境为 JDK 1.8，服务器为 Apache Tomcat 9.0.56。 
- 陈述：系统将在 JDK 1.8 环境下运行，并部署在 Apache Tomcat 9.0.56 服务器上 。
- 系统关注点：Java 应用运行环境、Web 服务容器、兼容性、稳定性。
- 拥有者：开发团队。
- 影响的 AD 元素：部署环境、软件依赖。
- 原理陈述：JDK 1.8 是一个长期稳定且广泛使用的 Java 版本。Tomcat 是轻量级且成熟的 Web 服务器，与 Spring 框架兼容性良好。
- 约束和假设：假设这些版本能提供所需功能和性能。
- 考虑的备选方案： 
- 更新的 JDK 版本（如 JDK 11, 17）：可能带来新特性，但也可能存在兼容性问题或团队熟悉度问题。
- 其他 Web 服务器（如 Jetty, Undertow）：Tomcat 更为广泛使用，社区资源更丰富。
- 选择原理：JDK 1.8 和 Tomcat 9 是稳定且广泛使用的组合，风险较低。
- 做出决策时间点：项目技术选型阶段。

# 6 架构框架和架构描述语言

## 6.1 架构框架

- 架构框架标识
    - 框架名称：E‑Commerce Platform Architecture Framework (ECP‑AF)
    - 版本 / 日期：v 1.0 · 2025‑05‑30
    - 所有者：ECP 项目架构组
    - 目标：为“商品网上交易系统”提供统一视点、模型种类与一致性规则，确保干系人关注点得到充分、可追踪地刻画。
    - 参考标准：ISO/IEC/IEEE 42010:2011、UML 2.5、BPMN 2.0、ER Model、State‑Machine Notation
- 关注点（Concerns）

| 关注点编号 | 关注点 | 摘要说明 |
| :--- | :--- | :--- |
| C-01 | 功能完整性 | 端到端购物流程正确、可用 |
| C-02 | 易用性 / 用户体验 | 操作直观、响应 ≤ 2 s |
| C-03 | 数据一致性 | 订单‑库存‑支付状态保持一致 |
| C-04 | 性能与容量 | ≥ 1 000 并发；P95 响应 ≤ 2 s |
| C-05 | 安全与隐私 | 支付/个人信息加密；符合 OWASP Top 10 |
| C-06 | 可维护性 & 演进性 | 模块化，便于后续拆分微服务 |
| C-07 | 监管 / 合规 | 满足支付、发票、数据留存法规 |

- 干系人（Stakeholders）

| 干系人编号 | 干系人 | 主要关注点 |
| :--- | :--- | :--- |
| S-U | 普通用户（买家） | C-01、C-02 |
| S-A | 管理员/卖家 | C-01、C-03、C-05 |
| S-O | 中小企业（系统拥有者） | C-01 ~ C-07 |
| S-D | 开发团队 | C-03 ~ C-06 |
| S-Ops | 运维人员 | C-04、C-05、C-06 |
| S-Reg | 监管/审计方 | C-05、C-07 |

- 架构视点（Viewpoints）

| 视点 ID | 名称 | 关注点 | 支持干系人 | 主要模型种类 |
| :--- | :--- | :--- | :--- | :--- |
| VP-UI | 用户交互视点 | C-01、C-02 | S-U、S-A、S-D | UML 用例图、BPMN 流程、原型线框 |
| VP-DATA | 数据处理视点 | C-03 | S-A、S-D、S-Ops | DFD、ER 图、接口序列图 |
| VP-STATE | 系统状态视点 | C-03、C-04 | S-D、S-Ops | 状态机图、时序图 |
| VP-DEP | 部署视点 | C-04、C-06 | S-Ops、S-O、S-D | 部署图、容量规划表 |
| VP-SEC | 安全视点 | C-05、C-07 | S-Reg、S-Ops、S-D | 威胁模型、数据分类表 |

- 对应关系规则（Correspondence Rules）

| 规则 ID | 描述 | 使用视点 |
| :--- | :--- | :--- |
| CR-01 Trace_REQ-UI | 每个 UML 用例必须映射到至少一条 SRS | VP-UI |
| CR-02 Consis_Class_ER | ER 图中的实体表必须在 Domain Class Diagram 中存在同名类 | VP-DATA |
| CR-03 State_Coverage | 订单状态机必须覆盖 Order.status 的全部枚举值 | VP-STATE |
| CR-04 Deploy_Link | 部署视图中的每个运行时节点必须链接到对应代码模块 | VP-DEP |
| CR-05 Sec_Classify | 任何含 PII 的数据流必须按《数据分类表》标记并加密 | VP-SEC |

- 适用性条件
    - 域范围：日均 ≤ 1 万订单、基于 Java SSM 单体架构的 B2C 网上交易系统。
    - 可裁剪性：
        - 若项目 无实时性能约束，可省略 VP‑STATE；
        - 若仅做 MVP 验证，VP‑SEC 可先执行最小威胁清单（CR‑05 仍需保留）。
    - 组织边界：适用于自有服务器或私有云部署；迁移微服务或公有云时需升级至框架 v 2.0。

## 6.2 架构说明遵从于架构框架

架构说明在以下情形下遵从于架构框架：
- 架构说明中已考虑和识别架构框架中识别的每个可应用的干系人(通过 5.3)；
- 架构说明中已考虑和识别架构框架中识别的每个可应用的关注点(通过 5.3)；
- 架构说明包含(通过 5.4) 架构框架中指定的每个可应用的视点(通过 6.1)；
- 架构说明包含架构框架中指定的每个可用的对应规则(通过 5.7.3)；并且，
- 架构说明遵循条款 5 的要求。

本文件所述“ECP‑AD v 1.0”（商品网上交易系统架构说明）声明遵从 ECP‑AF v 1.0 架构框架。遵从性判定依据如下表所列证据；当满足 6.1 所述适用性条件（≤ 1 万日订单、Java SSM 单体架构、私有部署）时，本声明有效。
| 判定点 | ECP-AF 要求 | 在本架构说明中的落实 | 结论 |
| :--- | :--- | :--- | :--- |
| 干系人已识别 | S-U、S-A、S-O、S-D、S-Ops、S-Reg | 5.3 干系人和关注点的标识 | 已满足 |
| 关注点已识别 | C-01 ~ C-07 | 5.3 | 已满足 |
| 视点全部覆盖 | VP-UI、VP-DATA、VP-STATE、VP-DEP、VP-SEC | 7 架构视点 | 部分视图仍在补充，计划版图完成后即满足 |
| 对应规则列入 | CR-01 ~ CR-05 | 5.7.3 对应关系规则 | 已满足 |

## 6.3 架构描述语言

本项目采用“ECP 统一架构描述语言（ECP‑UADL）”——一个由多种常用建模语言与文档约定组合而成的轻量级 ADL，用于表达 6.1 框架中各视点的模型。ECP‑UADL 符合 ISO/IEC/IEEE 42010:2011 第 6.3 条款 a–e 要求，详情如下：
- 关注点覆盖

| 关注点编号 | 关注点 | 由 ECP-UADL 支持的模型种类 |
| :--- | :--- | :--- |
| C-01 | 功能完整性 | UML 用例图、BPMN 流程、线框原型 |
| C-02 | 易用性 / 用户体验 | 线框原型、BPMN 流程 |
| C-03 | 数据一致性 | DFD、ER 图、接口序列图 |
| C-04 | 性能与容量 | 部署图、容量规划表 |
| C-05 | 安全与隐私 | 威胁模型、数据分类表 |
| C-06 | 可维护性 & 演进性 | UML 类图、部署图 |
| C-07 | 监管 / 合规 | 数据分类表、审计流程图 |

- 关联干系人

| 干系人 | 主要受益模型 | 关注点 |
| :--- | :--- | :--- |
| S-U（买家） | 线框原型、BPMN 购物流程 | C-01、C-02 |
| S-A（管理员/卖家） | 用例图、DFD、接口序列图 | C-01、C-03、C-05 |
| S-O（系统拥有者） | 部署图、容量规划表 | C-01 ~ C-07 |
| S-D（开发团队） | UML 类图、状态机图 | C-03 ~ C-06 |
| S-Ops（运维人员） | 部署图、威胁模型 | C-04、C-05、C-06 |
| S-Reg（监管/审计方） | 数据分类表、审计流程 | C-05、C-07 |

- 模型种类（Model Kinds）

| 模型种类编号 | 模型种类 | 基础语言/语法 | 典型文件扩展名 |
| :--- | :--- | :--- | :--- |
| MK-UC | 用例图 | UML 2.5 | .uml, .puml |
| MK-BPMN | 业务流程图 | BPMN 2.0 | .bpmn, .xml |
| MK-WF | 线框/原型 | Balsamiq 或 Figma 导出 | .png, .svg |
| MK-DFD | 数据流图 | Yourdon/Gane-Sarson | .dxf, .drawio |
| MK-ER | 实体-关系图 | Crow's Foot | .erd, .png |
| MK-SEQ | 接口序列图 | UML 2.5 | .uml, .puml |
| MK-SM | 状态机图 | SysML/UML State | .uml, .puml |
| MK-DEP | 部署图 | UML 部署 + C4 容器层 | .uml, .puml |
| MK-CAP | 容量规划表 | Markdown/Execl | .md, .xlsx |
| MK-THREAT | 威胁模型 | STRIDE 模版 | .md, .docx |
| MK-CLASS | 领域类图 | UML 2.5 | .uml, .puml |
| MK-DATA-CLS | 数据分类表 | Markdown 表 | .md |

- 支持的架构视点

| 视点 ID | 依赖的模型种类 |
| :--- | :--- |
| VP-UI | MK-UC, MK-BPMN, MK-WF |
| VP-DATA | MK-DFD, MK-ER, MK-SEQ |
| VP-STATE | MK-SM, MK-SEQ |
| VP-DEP | MK-DEP, MK-CAP |
| VP-SEC | MK-THREAT, MK-DATA-CLS |

- 模型-对应规则

| 规则 ID | 适用模型种类 | 描述 |
| :--- | :--- | :--- |
| CR-01 Trace_REQ_UI | MK-UC $\leftrightarrow$ SRS 功能需求 | 每个用例映射至少 1 条需求 |
| CR-02 UC-BPMN-Sync | MK-UC $\leftrightarrow$ MK-BPMN | 用例主流程在 BPMN 中完整展开 |
| CR-03 Class-ER-Align | MK-CLASS $\leftrightarrow$ MK-ER | 领域类图中的实体与 ER 表一致 |
| CR-04 State-Attr-Match | MK-SM $\leftrightarrow$ Order.status 枚举 | 状态机须覆盖全部枚举值 |
| CR-05 Data-Encrypt-Tag | MK-DFD/MK-SEQ $\leftrightarrow$ MK-DATA-CLS | 含 PII 的数据流需加密并标记分类 |